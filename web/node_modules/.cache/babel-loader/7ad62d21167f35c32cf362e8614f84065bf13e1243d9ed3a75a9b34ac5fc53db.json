{"ast":null,"code":"import { getApprovalList } from '@/api/ApprovalAPI';\nimport { getAllUserId } from \"@/api/UserAPI\";\nimport { getApproval } from '@/api/ApprovalAPI';\nimport { saveApproval } from '@/api/ApprovalAPI';\nimport { deleteApproval } from '@/api/ApprovalAPI';\nimport ApprovalEdit from '@/components/edit/ApprovalEdit.vue';\nimport ApprovalSearch from '@/components/search/ApprovalSearch.vue';\nimport ApprovalTable from '@/components/table/ApprovalTable.vue';\nimport { errorHandler } from '@/utils/RequestUtils';\nimport { getAllProjectId } from \"@/api/ProjectAPI\";\nimport { getAllGroupId } from \"@/api/GroupAPI\";\nexport default {\n  components: {\n    ApprovalEdit,\n    ApprovalSearch,\n    ApprovalTable\n  },\n  data() {\n    return {\n      open: false,\n      loading: false,\n      options: {\n        allUserId: [],\n        allProjectId: [],\n        allGroupId: []\n      },\n      title: \"\",\n      approvalForm: {},\n      approvalSearchForm: {},\n      approvalPageData: {\n        page: 0,\n        size: 0,\n        total: 0,\n        content: []\n      }\n    };\n  },\n  created() {\n    this.fetchApprovalData();\n    this.getAllOptions();\n  },\n  methods: {\n    fetchApprovalData(page = 1, size = 10) {\n      getApprovalList({\n        page,\n        size,\n        ...this.approvalSearchForm\n      }).then(res => {\n        this.approvalPageData.page = res.page;\n        this.approvalPageData.size = res.size;\n        this.approvalPageData.total = res.total;\n        this.approvalPageData.content = res.content;\n      }).catch(errorHandler);\n    },\n    resetApprovalSearchForm() {\n      this.approvalSearchForm = {};\n    },\n    showAddApproval() {\n      this.approvalForm = {};\n      this.open = true;\n      this.title = \"Add Approval\";\n    },\n    showEditApproval(id) {\n      getApproval(id).then(res => {\n        this.approvalForm = {\n          ...res\n        };\n        this.open = true;\n        this.title = \"Edit Approval\";\n      }).catch(errorHandler);\n    },\n    handleSaveApproval() {\n      saveApproval(this.approvalForm).then(() => {\n        this.open = false;\n        this.$message.success(\"Approval saved successfully\");\n        this.fetchApprovalData();\n      }).catch(errorHandler);\n    },\n    handleDeleteApproval(id) {\n      deleteApproval(id).then(() => {\n        this.$message.success(\"Approval deleted successfully\");\n        this.fetchApprovalData();\n      }).catch(errorHandler);\n    },\n    getAllOptions() {\n      getAllUserId().then(res => {\n        this.options.allUserId = res;\n      }).catch(errorHandler);\n      getAllProjectId().then(res => {\n        this.options.allProjectId = res;\n      }).catch(errorHandler);\n      getAllGroupId().then(res => {\n        this.options.allGroupId = res;\n      }).catch(errorHandler);\n    }\n  }\n};","map":{"version":3,"names":["getApprovalList","getAllUserId","getApproval","saveApproval","deleteApproval","ApprovalEdit","ApprovalSearch","ApprovalTable","errorHandler","getAllProjectId","getAllGroupId","components","data","open","loading","options","allUserId","allProjectId","allGroupId","title","approvalForm","approvalSearchForm","approvalPageData","page","size","total","content","created","fetchApprovalData","getAllOptions","methods","then","res","catch","resetApprovalSearchForm","showAddApproval","showEditApproval","id","handleSaveApproval","$message","success","handleDeleteApproval"],"sources":["src/views/admin/ApprovalView.vue"],"sourcesContent":["<template>\n    <div>\n        <!-- Approval搜索栏 -->\n        <ApprovalSearch :form=\"approvalSearchForm\" :onSearch=\"fetchApprovalData\" :onReset=\"resetApprovalSearchForm\"\n            :onAdd=\"showAddApproval\" />\n\n        <!-- Approval列表 -->\n        <ApprovalTable :loading=\"loading\" :pageData=\"approvalPageData\" :onEdit=\"showEditApproval\"\n            :onFetchData=\"fetchApprovalData\" :onDelete=\"handleDeleteApproval\" :options=\"options\" />\n\n        <!-- 新增/编辑Approval的弹出框 -->\n        <el-dialog :title=\"title\" width=\"30%\" :visible.sync=\"open\">\n            <ApprovalEdit :form=\"approvalForm\" :onSubmit=\"handleSaveApproval\" :options=\"options\" />\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport { getApprovalList } from '@/api/ApprovalAPI';\nimport { getAllUserId } from \"@/api/UserAPI\";\nimport { getApproval } from '@/api/ApprovalAPI';\nimport { saveApproval } from '@/api/ApprovalAPI';\nimport { deleteApproval } from '@/api/ApprovalAPI';\nimport ApprovalEdit from '@/components/edit/ApprovalEdit.vue';\nimport ApprovalSearch from '@/components/search/ApprovalSearch.vue';\nimport ApprovalTable from '@/components/table/ApprovalTable.vue';\nimport { errorHandler } from '@/utils/RequestUtils';\nimport { getAllProjectId } from \"@/api/ProjectAPI\";\nimport { getAllGroupId } from \"@/api/GroupAPI\";\n\nexport default {\n    components: {\n        ApprovalEdit,\n        ApprovalSearch,\n        ApprovalTable\n    },\n    data() {\n        return {\n            open: false,\n            loading: false,\n            options: {\n                allUserId: [],\n                allProjectId: [],\n                allGroupId: [],\n            },\n            title: \"\",\n            approvalForm: {},\n            approvalSearchForm: {},\n            approvalPageData: {\n                page: 0,\n                size: 0,\n                total: 0,\n                content: [],\n            },\n        };\n    },\n    created() {\n        this.fetchApprovalData();\n        this.getAllOptions();\n    },\n    methods: {\n        fetchApprovalData(page = 1, size = 10) {\n            getApprovalList({ page, size, ...this.approvalSearchForm })\n                .then(res => {\n                    this.approvalPageData.page = res.page;\n                    this.approvalPageData.size = res.size;\n                    this.approvalPageData.total = res.total;\n                    this.approvalPageData.content = res.content;\n                })\n                .catch(errorHandler);\n        },\n        resetApprovalSearchForm() {\n            this.approvalSearchForm = {}\n        },\n        showAddApproval() {\n            this.approvalForm = {};\n            this.open = true;\n            this.title = \"Add Approval\"\n        },\n        showEditApproval(id) {\n            getApproval(id)\n                .then(res => {\n                    this.approvalForm = { ...res };\n                    this.open = true;\n                    this.title = \"Edit Approval\"\n                })\n                .catch(errorHandler);\n        },\n        handleSaveApproval() {\n            saveApproval(this.approvalForm)\n                .then(() => {\n                    this.open = false;\n                    this.$message.success(\"Approval saved successfully\")\n                    this.fetchApprovalData();\n                })\n                .catch(errorHandler);\n        },\n        handleDeleteApproval(id) {\n            deleteApproval(id)\n                .then(() => {\n                    this.$message.success(\"Approval deleted successfully\")\n                    this.fetchApprovalData();\n                })\n                .catch(errorHandler);\n        },\n        getAllOptions() {\n            getAllUserId()\n                .then(res => {\n                    this.options.allUserId = res\n                })\n                .catch(errorHandler);\n            getAllProjectId()\n                .then(res => {\n                    this.options.allProjectId = res\n                })\n                .catch(errorHandler);\n            getAllGroupId()\n                .then(res => {\n                    this.options.allGroupId = res\n                })\n                .catch(errorHandler);\n        },\n    }\n};\n</script>"],"mappings":"AAkBA,SAAAA,eAAA;AACA,SAAAC,YAAA;AACA,SAAAC,WAAA;AACA,SAAAC,YAAA;AACA,SAAAC,cAAA;AACA,OAAAC,YAAA;AACA,OAAAC,cAAA;AACA,OAAAC,aAAA;AACA,SAAAC,YAAA;AACA,SAAAC,eAAA;AACA,SAAAC,aAAA;AAEA;EACAC,UAAA;IACAN,YAAA;IACAC,cAAA;IACAC;EACA;EACAK,KAAA;IACA;MACAC,IAAA;MACAC,OAAA;MACAC,OAAA;QACAC,SAAA;QACAC,YAAA;QACAC,UAAA;MACA;MACAC,KAAA;MACAC,YAAA;MACAC,kBAAA;MACAC,gBAAA;QACAC,IAAA;QACAC,IAAA;QACAC,KAAA;QACAC,OAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,iBAAA;IACA,KAAAC,aAAA;EACA;EACAC,OAAA;IACAF,kBAAAL,IAAA,MAAAC,IAAA;MACAxB,eAAA;QAAAuB,IAAA;QAAAC,IAAA;QAAA,QAAAH;MAAA,GACAU,IAAA,CAAAC,GAAA;QACA,KAAAV,gBAAA,CAAAC,IAAA,GAAAS,GAAA,CAAAT,IAAA;QACA,KAAAD,gBAAA,CAAAE,IAAA,GAAAQ,GAAA,CAAAR,IAAA;QACA,KAAAF,gBAAA,CAAAG,KAAA,GAAAO,GAAA,CAAAP,KAAA;QACA,KAAAH,gBAAA,CAAAI,OAAA,GAAAM,GAAA,CAAAN,OAAA;MACA,GACAO,KAAA,CAAAzB,YAAA;IACA;IACA0B,wBAAA;MACA,KAAAb,kBAAA;IACA;IACAc,gBAAA;MACA,KAAAf,YAAA;MACA,KAAAP,IAAA;MACA,KAAAM,KAAA;IACA;IACAiB,iBAAAC,EAAA;MACAnC,WAAA,CAAAmC,EAAA,EACAN,IAAA,CAAAC,GAAA;QACA,KAAAZ,YAAA;UAAA,GAAAY;QAAA;QACA,KAAAnB,IAAA;QACA,KAAAM,KAAA;MACA,GACAc,KAAA,CAAAzB,YAAA;IACA;IACA8B,mBAAA;MACAnC,YAAA,MAAAiB,YAAA,EACAW,IAAA;QACA,KAAAlB,IAAA;QACA,KAAA0B,QAAA,CAAAC,OAAA;QACA,KAAAZ,iBAAA;MACA,GACAK,KAAA,CAAAzB,YAAA;IACA;IACAiC,qBAAAJ,EAAA;MACAjC,cAAA,CAAAiC,EAAA,EACAN,IAAA;QACA,KAAAQ,QAAA,CAAAC,OAAA;QACA,KAAAZ,iBAAA;MACA,GACAK,KAAA,CAAAzB,YAAA;IACA;IACAqB,cAAA;MACA5B,YAAA,GACA8B,IAAA,CAAAC,GAAA;QACA,KAAAjB,OAAA,CAAAC,SAAA,GAAAgB,GAAA;MACA,GACAC,KAAA,CAAAzB,YAAA;MACAC,eAAA,GACAsB,IAAA,CAAAC,GAAA;QACA,KAAAjB,OAAA,CAAAE,YAAA,GAAAe,GAAA;MACA,GACAC,KAAA,CAAAzB,YAAA;MACAE,aAAA,GACAqB,IAAA,CAAAC,GAAA;QACA,KAAAjB,OAAA,CAAAG,UAAA,GAAAc,GAAA;MACA,GACAC,KAAA,CAAAzB,YAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}