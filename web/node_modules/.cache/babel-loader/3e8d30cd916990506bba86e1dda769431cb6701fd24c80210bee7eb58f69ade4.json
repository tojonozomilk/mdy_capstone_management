{"ast":null,"code":"import { getUserList } from '@/api/UserAPI';\nimport { getUser } from '@/api/UserAPI';\nimport { saveUser } from '@/api/UserAPI';\nimport { deleteUser } from '@/api/UserAPI';\nimport UserEdit from '@/components/edit/UserEdit.vue';\nimport UserSearch from '@/components/search/UserSearch.vue';\nimport UserTable from '@/components/table/UserTable.vue';\nimport { errorHandler } from '@/utils/RequestUtils';\nexport default {\n  components: {\n    UserEdit,\n    UserSearch,\n    UserTable\n  },\n  data() {\n    return {\n      open: false,\n      loading: false,\n      title: \"\",\n      userForm: {},\n      userSearchForm: {},\n      userPageData: {\n        page: 0,\n        size: 0,\n        total: 0,\n        content: []\n      }\n    };\n  },\n  created() {\n    this.fetchUserData();\n  },\n  methods: {\n    fetchUserData(page = 1, size = 10) {\n      getUserList({\n        page,\n        size,\n        ...this.userSearchForm\n      }).then(res => {\n        this.userPageData.page = res.page;\n        this.userPageData.size = res.size;\n        this.userPageData.total = res.total;\n        this.userPageData.content = res.content;\n      }).catch(errorHandler);\n    },\n    resetUserSearchForm() {\n      this.userSearchForm = {};\n    },\n    showAddUser() {\n      this.userForm = {};\n      this.open = true;\n      this.title = \"Add User\";\n    },\n    showEditUser(id) {\n      getUser(id).then(res => {\n        this.userForm = {\n          ...res\n        };\n        this.open = true;\n        this.title = \"Edit User\";\n      }).catch(errorHandler);\n    },\n    handleSaveUser() {\n      saveUser(this.userForm).then(() => {\n        this.open = false;\n        this.$message.success(\"User saved successfully\");\n        this.fetchUserData();\n      }).catch(errorHandler);\n    },\n    handleDeleteUser(id) {\n      deleteUser(id).then(() => {\n        this.$message.success(\"User deleted successfully\");\n        this.fetchUserData();\n      }).catch(errorHandler);\n    }\n  }\n};","map":{"version":3,"names":["getUserList","getUser","saveUser","deleteUser","UserEdit","UserSearch","UserTable","errorHandler","components","data","open","loading","title","userForm","userSearchForm","userPageData","page","size","total","content","created","fetchUserData","methods","then","res","catch","resetUserSearchForm","showAddUser","showEditUser","id","handleSaveUser","$message","success","handleDeleteUser"],"sources":["src/views/admin/UserView.vue"],"sourcesContent":["<template>\n    <div>\n        <!-- User搜索栏 -->\n        <UserSearch :form=\"userSearchForm\" :onSearch=\"fetchUserData\"\n\t\t:onReset=\"resetUserSearchForm\" :onAdd=\"showAddUser\" />\n\n        <!-- User列表 -->\n        <UserTable :loading=\"loading\" :pageData=\"userPageData\" :onEdit=\"showEditUser\"\n            :onFetchData=\"fetchUserData\" :onDelete=\"handleDeleteUser\" />\n\n        <!-- 新增/编辑User的弹出框 -->\n        <el-dialog :title=\"title\" width=\"30%\" :visible.sync=\"open\">\n            <UserEdit :form=\"userForm\" :onSubmit=\"handleSaveUser\" />\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport { getUserList } from '@/api/UserAPI';\nimport { getUser } from '@/api/UserAPI';\nimport { saveUser } from '@/api/UserAPI';\nimport { deleteUser } from '@/api/UserAPI';\nimport UserEdit from '@/components/edit/UserEdit.vue';\nimport UserSearch from '@/components/search/UserSearch.vue';\nimport UserTable from '@/components/table/UserTable.vue';\nimport { errorHandler } from '@/utils/RequestUtils';\nexport default {\n    components: {\n        UserEdit,\n        UserSearch,\n        UserTable\n    },\n    data() {\n        return {\n            open: false,\n            loading: false,\n            title: \"\",\n            userForm: {},\n            userSearchForm: {},\n            userPageData: {\n                page: 0,\n                size: 0,\n                total: 0,\n                content: [],\n            },\n        };\n    },\n    created() {\n        this.fetchUserData();\n    },\n    methods: {\n        fetchUserData(page = 1, size = 10) {\n            getUserList({ page, size, ...this.userSearchForm })\n                .then(res => {\n                    this.userPageData.page = res.page;\n                    this.userPageData.size = res.size;\n                    this.userPageData.total = res.total;\n                    this.userPageData.content = res.content;\n                })\n                .catch(errorHandler);\n        },\n        resetUserSearchForm() {\n            this.userSearchForm = {}\n        },\n        showAddUser() {\n            this.userForm = {};\n            this.open = true;\n            this.title = \"Add User\"\n        },\n        showEditUser(id) {\n            getUser(id)\n                .then(res => {\n                    this.userForm = { ...res };\n                    this.open = true;\n                    this.title = \"Edit User\"\n                })\n                .catch(errorHandler);\n        },\n        handleSaveUser() {\n            saveUser(this.userForm)\n                .then(() => {\n                    this.open = false;\n                    this.$message.success(\"User saved successfully\")\n                    this.fetchUserData();\n                })\n                .catch(errorHandler);\n        },\n        handleDeleteUser(id) {\n            deleteUser(id)\n                .then(() => {\n                    this.$message.success(\"User deleted successfully\")\n                    this.fetchUserData();\n                })\n                .catch(errorHandler);\n        },\n    }\n};\n</script>"],"mappings":"AAkBA,SAAAA,WAAA;AACA,SAAAC,OAAA;AACA,SAAAC,QAAA;AACA,SAAAC,UAAA;AACA,OAAAC,QAAA;AACA,OAAAC,UAAA;AACA,OAAAC,SAAA;AACA,SAAAC,YAAA;AACA;EACAC,UAAA;IACAJ,QAAA;IACAC,UAAA;IACAC;EACA;EACAG,KAAA;IACA;MACAC,IAAA;MACAC,OAAA;MACAC,KAAA;MACAC,QAAA;MACAC,cAAA;MACAC,YAAA;QACAC,IAAA;QACAC,IAAA;QACAC,KAAA;QACAC,OAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,aAAA;EACA;EACAC,OAAA;IACAD,cAAAL,IAAA,MAAAC,IAAA;MACAjB,WAAA;QAAAgB,IAAA;QAAAC,IAAA;QAAA,QAAAH;MAAA,GACAS,IAAA,CAAAC,GAAA;QACA,KAAAT,YAAA,CAAAC,IAAA,GAAAQ,GAAA,CAAAR,IAAA;QACA,KAAAD,YAAA,CAAAE,IAAA,GAAAO,GAAA,CAAAP,IAAA;QACA,KAAAF,YAAA,CAAAG,KAAA,GAAAM,GAAA,CAAAN,KAAA;QACA,KAAAH,YAAA,CAAAI,OAAA,GAAAK,GAAA,CAAAL,OAAA;MACA,GACAM,KAAA,CAAAlB,YAAA;IACA;IACAmB,oBAAA;MACA,KAAAZ,cAAA;IACA;IACAa,YAAA;MACA,KAAAd,QAAA;MACA,KAAAH,IAAA;MACA,KAAAE,KAAA;IACA;IACAgB,aAAAC,EAAA;MACA5B,OAAA,CAAA4B,EAAA,EACAN,IAAA,CAAAC,GAAA;QACA,KAAAX,QAAA;UAAA,GAAAW;QAAA;QACA,KAAAd,IAAA;QACA,KAAAE,KAAA;MACA,GACAa,KAAA,CAAAlB,YAAA;IACA;IACAuB,eAAA;MACA5B,QAAA,MAAAW,QAAA,EACAU,IAAA;QACA,KAAAb,IAAA;QACA,KAAAqB,QAAA,CAAAC,OAAA;QACA,KAAAX,aAAA;MACA,GACAI,KAAA,CAAAlB,YAAA;IACA;IACA0B,iBAAAJ,EAAA;MACA1B,UAAA,CAAA0B,EAAA,EACAN,IAAA;QACA,KAAAQ,QAAA,CAAAC,OAAA;QACA,KAAAX,aAAA;MACA,GACAI,KAAA,CAAAlB,YAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}