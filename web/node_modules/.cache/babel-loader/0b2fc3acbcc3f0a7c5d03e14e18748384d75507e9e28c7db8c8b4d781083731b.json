{"ast":null,"code":"import axios from \"axios\";\nimport qs from \"qs\";\nimport { Message } from \"element-ui\";\n\n// 后端服务地址\nexport const BASE_URL = \"http://localhost:8080\";\n\n// ajax请求基础参数\nexport const request = axios.create({\n  baseURL: BASE_URL,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  },\n  withCredentials: true,\n  paramsSerializer: function (params) {\n    return qs.stringify(params, {\n      arrayFormat: \"repeat\"\n    });\n  }\n});\n\n/**\n * 处理响应数据\n * @param response HTTP响应内容\n * @returns 统一返回值的数据\n */\nexport function responseHandler(response) {\n  const result = response.data;\n  const success = result.success;\n  const message = result.message;\n  const data = result.data;\n  if (message === \"redirect\") {\n    window.location.replace(\"/#/login\");\n    throw new Error(\"Please login first\");\n  }\n  if (!success) {\n    throw new Error(message);\n  }\n  return data;\n}\n\n/**\n * API统一异常处理\n * @param error 异常\n */\nexport function errorHandler(error) {\n  const msg = error?.message || error;\n  Message.warning(msg);\n}","map":{"version":3,"names":["axios","qs","Message","BASE_URL","request","create","baseURL","headers","withCredentials","paramsSerializer","params","stringify","arrayFormat","responseHandler","response","result","data","success","message","window","location","replace","Error","errorHandler","error","msg","warning"],"sources":["D:/8543/9900/project/web/src/utils/RequestUtils.js"],"sourcesContent":["import axios from \"axios\";\nimport qs from \"qs\";\nimport { Message } from \"element-ui\";\n\n// 后端服务地址\nexport const BASE_URL = \"http://localhost:8080\";\n\n// ajax请求基础参数\nexport const request = axios.create({\n  baseURL: BASE_URL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n  withCredentials: true,\n  paramsSerializer: function (params) {\n    return qs.stringify(params, { arrayFormat: \"repeat\" });\n  },\n});\n\n/**\n * 处理响应数据\n * @param response HTTP响应内容\n * @returns 统一返回值的数据\n */\nexport function responseHandler(response) {\n  const result = response.data;\n  const success = result.success;\n  const message = result.message;\n  const data = result.data;\n\n  if (message === \"redirect\") {\n    window.location.replace(\"/#/login\");\n    throw new Error(\"Please login first\");\n  }\n\n  if (!success) {\n    throw new Error(message);\n  }\n\n  return data;\n}\n\n/**\n * API统一异常处理\n * @param error 异常\n */\nexport function errorHandler(error) {\n  const msg = error?.message || error;\n  Message.warning(msg);\n}\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,EAAE,MAAM,IAAI;AACnB,SAASC,OAAO,QAAQ,YAAY;;AAEpC;AACA,OAAO,MAAMC,QAAQ,GAAG,uBAAuB;;AAE/C;AACA,OAAO,MAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAM,CAAC;EAClCC,OAAO,EAAEH,QAAQ;EACjBI,OAAO,EAAE;IACP,cAAc,EAAE;EAClB,CAAC;EACDC,eAAe,EAAE,IAAI;EACrBC,gBAAgB,EAAE,SAAAA,CAAUC,MAAM,EAAE;IAClC,OAAOT,EAAE,CAACU,SAAS,CAACD,MAAM,EAAE;MAAEE,WAAW,EAAE;IAAS,CAAC,CAAC;EACxD;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,eAAeA,CAACC,QAAQ,EAAE;EACxC,MAAMC,MAAM,GAAGD,QAAQ,CAACE,IAAI;EAC5B,MAAMC,OAAO,GAAGF,MAAM,CAACE,OAAO;EAC9B,MAAMC,OAAO,GAAGH,MAAM,CAACG,OAAO;EAC9B,MAAMF,IAAI,GAAGD,MAAM,CAACC,IAAI;EAExB,IAAIE,OAAO,KAAK,UAAU,EAAE;IAC1BC,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,UAAU,CAAC;IACnC,MAAM,IAAIC,KAAK,CAAC,oBAAoB,CAAC;EACvC;EAEA,IAAI,CAACL,OAAO,EAAE;IACZ,MAAM,IAAIK,KAAK,CAACJ,OAAO,CAAC;EAC1B;EAEA,OAAOF,IAAI;AACb;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASO,YAAYA,CAACC,KAAK,EAAE;EAClC,MAAMC,GAAG,GAAGD,KAAK,EAAEN,OAAO,IAAIM,KAAK;EACnCtB,OAAO,CAACwB,OAAO,CAACD,GAAG,CAAC;AACtB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}